import{w as i,g}from"./index.BK7BN-jz.js";var n=[];for(var c=0;c<256;++c)n.push((c+256).toString(16).slice(1));function p(t,e=0){return(n[t[e+0]]+n[t[e+1]]+n[t[e+2]]+n[t[e+3]]+"-"+n[t[e+4]]+n[t[e+5]]+"-"+n[t[e+6]]+n[t[e+7]]+"-"+n[t[e+8]]+n[t[e+9]]+"-"+n[t[e+10]]+n[t[e+11]]+n[t[e+12]]+n[t[e+13]]+n[t[e+14]]+n[t[e+15]]).toLowerCase()}var a,m=new Uint8Array(16);function y(){if(!a&&(a=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!a))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(m)}var v=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const u={randomUUID:v};function I(t,e,o){if(u.randomUUID&&!e&&!t)return u.randomUUID();t=t||{};var r=t.random||(t.rng||y)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,p(r)}const s=i(localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[]),d=i(null),j=i("init");d.subscribe(t=>{t&&(console.log("saving project",t),P(t))});const b=t=>{t.id=I(),t.date=new Date().toISOString(),s.update(e=>[...e,t])},w=t=>{let e=g(s).find(o=>o.id===t);S(e)},D=t=>{s.update(e=>e.filter(o=>o.id!==t.id)),l()},S=t=>{d.set(t)},x=t=>{d.update(e=>({...e,ids:t}))},h=t=>{d.update(e=>({...e,links:t}))},P=t=>{s.update(e=>{if(e.find(r=>r.id===t.id))return t.date=new Date().toISOString(),e.map(r=>r.id===t.id?t:r)}),l()},l=()=>{localStorage.setItem("projects",JSON.stringify(g(s)))};export{x as a,h as b,d as c,b as d,S as e,w as g,s as p,D as r,j as s};
